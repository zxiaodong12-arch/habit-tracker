import{u as y,c as d,a as e,t as v,w as x,b as p,g as h,v as m,l as k,s as V,T as C,d as M,h as n,p as B,o as c,m as S}from"./index-BDX3lOMN.js";import{_ as H,u as N}from"./_plugin-vue_export-helper-BEgLCHhX.js";const T={class:"login-container"},L={class:"login-card"},U={class:"login-header"},q={class:"login-subtitle"},z={class:"form-group"},D={key:0,class:"form-group"},A={class:"form-group"},E=["disabled"],I={key:0},R={key:1,class:"loading-spinner"},j=["disabled"],F={__name:"Login",setup(G){const g=B(),f=y(),w=N(),t=n(!0),l=n(""),i=n(""),a=n(""),o=n(!1),b=()=>{t.value=!t.value,l.value="",i.value="",a.value=""},_=async()=>{if(!o.value){o.value=!0;try{t.value?(await f.login(l.value,a.value)).success&&(await w.loadHabits(),g.push("/")):(await f.register(l.value,a.value,i.value||null)).success&&(t.value=!0,l.value="",i.value="",a.value="")}catch(u){console.error("操作失败:",u)}finally{o.value=!1}}};return(u,s)=>(c(),d("div",T,[e("div",L,[e("div",U,[s[3]||(s[3]=e("div",{class:"login-icon"},[e("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})])],-1)),e("h2",null,v(t.value?"欢迎回来":"创建账号"),1),e("p",q,v(t.value?"登录以继续使用习惯追踪器":"注册新账号开始追踪你的习惯"),1)]),e("form",{onSubmit:x(_,["prevent"]),class:"login-form"},[e("div",z,[s[4]||(s[4]=e("label",{for:"username"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})]),p(" 用户名 ")],-1)),h(e("input",{type:"text",id:"username","onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r),required:"",autofocus:"",placeholder:"请输入用户名"},null,512),[[m,l.value]])]),k(C,{name:"slide-fade"},{default:V(()=>[t.value?S("",!0):(c(),d("div",D,[s[5]||(s[5]=e("label",{for:"email"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})]),p(" 邮箱（可选） ")],-1)),h(e("input",{type:"email",id:"email","onUpdate:modelValue":s[1]||(s[1]=r=>i.value=r),placeholder:"example@email.com"},null,512),[[m,i.value]])]))]),_:1}),e("div",A,[s[6]||(s[6]=e("label",{for:"password"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]),p(" 密码 ")],-1)),h(e("input",{type:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=r=>a.value=r),required:"",placeholder:"请输入密码"},null,512),[[m,a.value]])]),e("button",{type:"submit",class:M(["btn-submit",{loading:o.value}]),disabled:o.value},[o.value?(c(),d("span",R)):(c(),d("span",I,v(t.value?"登录":"注册"),1))],10,E),s[7]||(s[7]=e("div",{class:"form-divider"},[e("span",null,"或")],-1)),e("button",{type:"button",class:"btn-switch",onClick:b,disabled:o.value},v(t.value?"还没有账号？立即注册":"已有账号？立即登录"),9,j)],32)])]))}},O=H(F,[["__scopeId","data-v-62ac3411"]]);export{O as default};
