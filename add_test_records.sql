-- 为习惯 ID=3 添加测试记录，用于展示曲线图效果
-- 执行时间: 2026-02-06

USE `habit_tracker`;

-- 删除该习惯的现有记录（可选，如果不想保留旧记录）
-- DELETE FROM habit_records WHERE habit_id = 3;

-- 为过去几个月添加记录，让曲线有起伏变化
-- 2025年10月：15次完成
INSERT INTO habit_records (habit_id, record_date, completed) VALUES
(3, '2025-10-01', 1), (3, '2025-10-03', 1), (3, '2025-10-05', 1), (3, '2025-10-07', 1), (3, '2025-10-09', 1),
(3, '2025-10-11', 1), (3, '2025-10-13', 1), (3, '2025-10-15', 1), (3, '2025-10-17', 1), (3, '2025-10-19', 1),
(3, '2025-10-21', 1), (3, '2025-10-23', 1), (3, '2025-10-25', 1), (3, '2025-10-27', 1), (3, '2025-10-29', 1)
ON DUPLICATE KEY UPDATE completed = VALUES(completed);

-- 2025年11月：22次完成（提升）
INSERT INTO habit_records (habit_id, record_date, completed) VALUES
(3, '2025-11-01', 1), (3, '2025-11-02', 1), (3, '2025-11-03', 1), (3, '2025-11-05', 1), (3, '2025-11-07', 1),
(3, '2025-11-09', 1), (3, '2025-11-10', 1), (3, '2025-11-12', 1), (3, '2025-11-14', 1), (3, '2025-11-15', 1),
(3, '2025-11-17', 1), (3, '2025-11-19', 1), (3, '2025-11-21', 1), (3, '2025-11-23', 1), (3, '2025-11-24', 1),
(3, '2025-11-25', 1), (3, '2025-11-27', 1), (3, '2025-11-28', 1), (3, '2025-11-29', 1), (3, '2025-11-30', 1),
(3, '2025-11-04', 1), (3, '2025-11-06', 1)
ON DUPLICATE KEY UPDATE completed = VALUES(completed);

-- 2025年12月：18次完成（略有下降）
INSERT INTO habit_records (habit_id, record_date, completed) VALUES
(3, '2025-12-01', 1), (3, '2025-12-03', 1), (3, '2025-12-05', 1), (3, '2025-12-07', 1), (3, '2025-12-09', 1),
(3, '2025-12-11', 1), (3, '2025-12-13', 1), (3, '2025-12-15', 1), (3, '2025-12-17', 1), (3, '2025-12-19', 1),
(3, '2025-12-21', 1), (3, '2025-12-23', 1), (3, '2025-12-25', 1), (3, '2025-12-27', 1), (3, '2025-12-29', 1),
(3, '2025-12-31', 1), (3, '2025-12-02', 1), (3, '2025-12-04', 1)
ON DUPLICATE KEY UPDATE completed = VALUES(completed);

-- 2026年1月：25次完成（大幅提升）
INSERT INTO habit_records (habit_id, record_date, completed) VALUES
(3, '2026-01-01', 1), (3, '2026-01-02', 1), (3, '2026-01-03', 1), (3, '2026-01-04', 1), (3, '2026-01-05', 1),
(3, '2026-01-06', 1), (3, '2026-01-07', 1), (3, '2026-01-08', 1), (3, '2026-01-09', 1), (3, '2026-01-10', 1),
(3, '2026-01-11', 1), (3, '2026-01-12', 1), (3, '2026-01-13', 1), (3, '2026-01-14', 1), (3, '2026-01-15', 1),
(3, '2026-01-16', 1), (3, '2026-01-17', 1), (3, '2026-01-18', 1), (3, '2026-01-19', 1), (3, '2026-01-20', 1),
(3, '2026-01-21', 1), (3, '2026-01-22', 1), (3, '2026-01-23', 1), (3, '2026-01-24', 1), (3, '2026-01-25', 1),
(3, '2026-01-26', 1)
ON DUPLICATE KEY UPDATE completed = VALUES(completed);

-- 2026年2月：已完成的记录（到当前日期）
INSERT INTO habit_records (habit_id, record_date, completed) VALUES
(3, '2026-02-01', 1), (3, '2026-02-02', 1), (3, '2026-02-03', 1), (3, '2026-02-04', 1), (3, '2026-02-05', 1),
(3, '2026-02-06', 1)
ON DUPLICATE KEY UPDATE completed = VALUES(completed);

-- 查询结果验证
SELECT 
    DATE_FORMAT(record_date, '%Y-%m') as month,
    COUNT(*) as completed_count
FROM habit_records 
WHERE habit_id = 3 AND completed = 1
GROUP BY DATE_FORMAT(record_date, '%Y-%m')
ORDER BY month;
